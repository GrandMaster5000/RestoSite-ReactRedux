{"version":3,"sources":["components/app-header/shopping-cart-solid.svg","components/app/food-bg.jpg","components/menu-list-item/index.js","components/menu-list-item/menu-list-item.js","components/resto-service-context/index.js","components/resto-service-context/resto-service-context.js","components/hoc/index.js","components/hoc/with-resto-service.js","actions/index.js","actions/type.js","components/spinner/index.js","components/spinner/spinner.js","components/error/index.js","components/error/error.js","components/menu-list/menu-list.js","components/menu-list/index.js","components/pages/main-page.js","components/cart-table/cart-table.js","components/cart-table/index.js","components/pages/cart-page.js","components/app-header/index.js","components/app-header/app-header.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/resto-service.js","reducers/index.js","store.js","index.js"],"names":["module","exports","__webpack_require__","p","MenuListItem","_ref","menuItem","onAddToCard","title","price","url","category","react_default","a","createElement","className","src","alt","onClick","RestoServiceContext","React","createContext","WithRestoService","Wrapper","props","components_resto_service_context","Consumer","RestoService","Object","assign","menuError","type","Spinner","Error","MenuList","_this","this","menuRequested","getMenuItems","then","res","menuLoaded","catch","_this$props","menuItems","loading","error","addedToCard","sumingPrice","components_spinner","components_error","map","components_menu_list_item","id","key","Component","mapDispatchToProps","newMenu","payload","connect","state","menu","laoding","MainPage","components_menu_list","deleteFromCard","decPrice","CartTable","_ref2","items","Fragment","item","counter","concat","Date","now","toString","Math","random","CartPage","components_cart_table","AppHeader","sumPrice","sum","react_router_dom","to","cartIcon","App","style","background","Background","components_app_header","react_router","exact","path","component","ErrorBoundry","setState","children","_apiBase","_callee","regenerator_default","wrap","_context","prev","next","getResource","abrupt","sent","stop","fetch","ok","json","initState","reducer","arguments","length","undefined","action","objectSpread","find","newItem","repeatIndex","findIndex","toConsumableArray","slice","idx","itemIndex","forEach","store","createStore","restoService","ReactDOM","render","es","error_boundry","Provider","value","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.e4942b36.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/shopping-cart-solid.701d6d1d.svg\";","module.exports = __webpack_public_path__ + \"static/media/food-bg.698e5e80.jpg\";","import MenuListItem from './menu-list-item';\nexport default MenuListItem;","import React from 'react';\nimport './menu-list-item.scss';\n\nconst MenuListItem = ({menuItem, onAddToCard}) => {\n    const {title, price, url, category} = menuItem;\n    return (\n        \n        <li className=\"menu__item\">\n            <div className=\"menu__title\">{title}</div>\n            <img className=\"menu__img\" src={url} alt={title}></img>\n            <div className=\"menu__category\">Category: <span>{category}</span></div>\n            <div className=\"menu__price\">Price: <span>{price}$</span></div>\n            <button onClick={() => onAddToCard()} className=\"menu__btn\">Add to cart</button>\n        </li>\n    )\n}\n\nexport default MenuListItem;","import RestoServiceContext from './resto-service-context';\n\nexport default RestoServiceContext;","import React from 'react';\r\n\r\nconst RestoServiceContext = React.createContext();\r\n\r\nexport default RestoServiceContext;","import WithRestoService from './with-resto-service';\n\nexport default WithRestoService;","import React from 'react';\nimport RestoServiceContext from '../resto-service-context';\n\nconst WithRestoService = () => (Wrapper) => {\n    return (props) => {\n        return (\n            <RestoServiceContext.Consumer>\n                {\n                    (RestoService) => {\n                        return <Wrapper {...props} RestoService={RestoService}/>\n                    }\n                }\n            </RestoServiceContext.Consumer>\n        )\n    }\n};\n\nexport default WithRestoService;","import { MENU_LOADED, MENU_REQUESTED , MENU_ERROR, ITEM_ADD_TO_CARD, ITEM_DELETE_FROM_CARD, SUM_PRICE, DEC_PRICE} from \"./type\"\r\n\r\nconst menuLoaded = (newMenu) => {\r\n    return {\r\n        type: MENU_LOADED,\r\n        payload: newMenu\r\n    };\r\n};\r\n\r\nconst menuRequested = () => {\r\n    return {\r\n        type: MENU_REQUESTED\r\n    };\r\n};\r\n\r\nconst menuError = () => {\r\n    return {\r\n        type: MENU_ERROR\r\n    };\r\n};\r\n\r\nconst addedToCard = (id) => {\r\n    return {\r\n        type: ITEM_ADD_TO_CARD,\r\n        payload: id\r\n    };\r\n};\r\n\r\nconst deleteFromCard = (id) => {\r\n    return {\r\n        type: ITEM_DELETE_FROM_CARD,\r\n        payload: id\r\n    };\r\n};\r\n\r\nconst sumingPrice = () => {\r\n    return {\r\n        type: SUM_PRICE\r\n    }\r\n}\r\n\r\nconst decPrice = (price) => {\r\n    return {\r\n        type: DEC_PRICE,\r\n        payload: price\r\n    }\r\n}\r\n\r\nexport {menuLoaded, menuRequested, menuError, addedToCard, deleteFromCard, sumingPrice, decPrice};","export const MENU_LOADED = 'MENU_LOADED';\r\nexport const MENU_REQUESTED = 'MENU_REQUESTED';\r\nexport const MENU_ERROR = 'MENU_ERROR';\r\nexport const ITEM_ADD_TO_CARD = 'ITEM_ADD_TO_CARD';\r\nexport const ITEM_DELETE_FROM_CARD = 'ITEM_DELETE_FROM_CARD';\r\nexport const SUM_PRICE = 'SUM_PRICE';\r\nexport const DEC_PRICE = 'DEC_PRICE';","import Spinner from './spinner';\n\nexport default Spinner;","import React from 'react';\n\nconst Spinner = () => {\n    return <div className=\"spinner\">loading...</div>\n}\n\nexport default Spinner;","import Error from './error';\n\nexport default Error;","import React from 'react';\n\nconst Error = () => {\n    return <div className=\"error\">Error</div>\n}\n\nexport default Error;","import React, {Component} from 'react';\nimport MenuListItem from '../menu-list-item';\nimport { connect } from 'react-redux';\nimport WithRestoService from '../hoc';\nimport { menuLoaded, menuRequested, menuError, addedToCard, sumingPrice } from '../../actions';\nimport Spinner from '../spinner';\nimport Error from '../error';\n\nimport './menu-list.scss';\n\nclass MenuList extends Component {\n    componentDidMount() {\n        this.props.menuRequested();\n\n        const {RestoService} = this.props;\n        RestoService.getMenuItems()\n        .then(res => this.props.menuLoaded(res))\n        .catch(() => menuError());\n    }\n\n    render() {\n        const {menuItems, loading, error, addedToCard, sumingPrice} = this.props;\n        \n        if(loading) {\n            return <Spinner/>\n        }\n\n        if(error) {\n            return <Error/>\n        }\n\n        return (\n            <ul className=\"menu__list\">\n                {menuItems.map(menuItem => {\n                    return <MenuListItem onAddToCard={() => {\n                        addedToCard(menuItem.id);\n                        sumingPrice();\n                    }}\n                    menuItem={menuItem} key={menuItem.id}/>\n                })}\n            </ul>\n        )\n    }\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        menuItems: state.menu,\n        laoding: state.loading,\n        error: state.error\n    }\n};\n\nconst mapDispatchToProps = {\n    menuLoaded,\n    menuRequested,\n    menuError,\n    addedToCard,\n    sumingPrice\n}\n\nexport default WithRestoService()(connect(mapStateToProps, mapDispatchToProps)(MenuList));","import MenuList from './menu-list';\nexport default MenuList;","import React from 'react';\nimport MenuList from '../menu-list';\n\nconst MainPage = () => {\n    return (\n        <MenuList/>\n    )\n}\n\nexport default MainPage;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport './cart-table.scss';\nimport { deleteFromCard, decPrice } from '../../actions';\n\nconst CartTable = ({items, deleteFromCard, decPrice}) => {\n    return (\n        <>\n            <div className=\"cart__title\">Ваш заказ:</div>\n            <div className=\"cart__list\">\n                {\n                    items.map(item => {\n                        const {title, price, url, id, counter} = item;\n\n                        return (\n                            <div key={`${id}${Date.now().toString()}${Math.random() * 10}`} className=\"cart__item\">\n                                <img src={url} className=\"cart__item-img\" alt={title}></img>\n                                <div className=\"cart__item-title\">{title}</div>\n                                <div className=\"cart__item-price\">{price}$</div>\n                                <div onClick={() => {\n                                decPrice(price);\n                                deleteFromCard(id)\n                                }} className=\"cart__close\">&times;</div>\n                                <div className=\"cart__counter\">Amount: {counter}</div>\n                            </div>\n                        )\n                    })\n                }\n              \n            </div>\n        </>\n    );\n};\n\nconst mapStateToProps = ({items}) => {\n    return {\n        items\n    }\n};\n\nconst mapDispatchToProps = {\n    deleteFromCard,\n    decPrice\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CartTable);","import CartTable from './cart-table';\n\nexport default CartTable;","import React from 'react';\nimport CartTable from '../cart-table';\n\nconst CartPage = () => {\n    return (\n        <div className=\"cart\"> \n            <CartTable/>\n        </div>\n    )\n}\n\nexport default CartPage;","import AppHeader from './app-header';\n\nexport default AppHeader;","import React from 'react';\nimport cartIcon from './shopping-cart-solid.svg';\nimport './app-header.scss';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nconst AppHeader = ({sumPrice}) => {\n    return (\n        <header className=\"header\">\n            <Link className=\"header__link\" to='/'>\n                Menu\n            </Link>\n            <Link className=\"header__link\" to='/basket'>\n                <img className=\"header__cart\" src={cartIcon} alt=\"cart\"></img>\n                Total: {sumPrice} $\n            </Link>\n        </header>\n    )\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        sumPrice: state.sum\n    }\n}\n\nexport default connect(mapStateToProps)(AppHeader);","import App from './app';\n\nexport default App;","import React from 'react';\nimport {MainPage, CartPage} from '../pages';\nimport AppHeader from '../app-header';\n\n\nimport Background from './food-bg.jpg';\nimport { Route } from 'react-router-dom';\n\nconst App = () => {\n    return (\n        <div style={{background: `url(${Background}) center center/cover no-repeat`}} className=\"app\">\n            <AppHeader/>\n            <Route exact path='/' component={MainPage}/>\n            \n            <Route path='/basket' component={CartPage}/>\n        </div>\n    )\n}\n\nexport default App;","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;","import React, {Component} from 'react';\nimport Error from '../error';\n\nexport default class ErrorBoundry extends Component {\n\n    state = {\n        error: false\n    }\n\n    componentDidCatch() {\n        this.setState({error: true})\n    }\n    render() { \n       if(this.state.error) {\n           return <Error/>\n       }\n\n       return this.props.children;\n    }\n}","export default class RestoService {\r\n    _apiBase = 'http://resto.korobskix.ru';\r\n\r\n     async getResource(url) {\r\n         const res = await fetch(`${this._apiBase}${url}`);\r\n\r\n         if(!res.ok) {\r\n             throw new Error (`Could not fetch ${this._apiBase}${url}`)\r\n         }\r\n\r\n         return await res.json();\r\n     }\r\n\r\n     getMenuItems = async () => {\r\n        return await this.getResource('/menu/');\r\n    }\r\n\r\n}","import { MENU_LOADED, MENU_REQUESTED, MENU_ERROR, ITEM_ADD_TO_CARD, ITEM_DELETE_FROM_CARD, SUM_PRICE, DEC_PRICE } from \"../actions/type\";\r\n\r\nconst initState = {\r\n    menu: [],\r\n    loading: true,\r\n    error: false,\r\n    items: [],\r\n    sum: 0\r\n}\r\n\r\nconst reducer = (state = initState, action) => {\r\n    switch(action.type) {\r\n        case MENU_LOADED:\r\n            return {\r\n                ...state,\r\n                menu: action.payload,\r\n                loading: false, \r\n                error: false\r\n            };\r\n        case MENU_REQUESTED:\r\n            return {\r\n                ...state,\r\n                menu: state.menu,\r\n                loading: true,\r\n                error: false\r\n            };\r\n        case MENU_ERROR:\r\n            return {\r\n                ...state,\r\n                menu: state.menu,\r\n                loading: false,\r\n                error: true\r\n            };\r\n        case ITEM_ADD_TO_CARD:\r\n            const id = action.payload,\r\n            item = state.menu.find(item => item.id === id),\r\n            newItem = {\r\n                title: item.title,\r\n                price: item.price,\r\n                url: item.url,\r\n                id: item.id,\r\n                counter: 1\r\n            }\r\n            const repeatIndex = state.items.findIndex(item => newItem.id === item.id);\r\n            if(repeatIndex >= 0) {\r\n                const counter = state.items[repeatIndex].counter + 1;\r\n                return {\r\n                    ...state,\r\n                    items: [\r\n                        ...state.items.slice(0, repeatIndex),\r\n                        {...state.items[repeatIndex], counter: counter}\r\n                    ]\r\n                }\r\n            }\r\n            \r\n            return {\r\n                ...state,\r\n                items: [\r\n                    ...state.items,\r\n                    newItem\r\n                ]\r\n            };\r\n        case ITEM_DELETE_FROM_CARD:\r\n            const idx = action.payload,\r\n            itemIndex = state.items.findIndex(item => item.id === idx);\r\n            if(state.items[itemIndex].counter > 1) {\r\n                const counter = state.items[itemIndex].counter - 1;\r\n                return {\r\n                    ...state,\r\n                    items: [\r\n                        ...state.items.slice(0, itemIndex),\r\n                        {...state.items[itemIndex], counter: counter},\r\n                        ...state.items.slice(itemIndex + 1)\r\n                    ]\r\n                }\r\n            }\r\n            return {\r\n                ...state,\r\n                items: [\r\n                    ...state.items.slice(0, itemIndex),\r\n                    ...state.items.slice(itemIndex + 1)\r\n                ]\r\n            };\r\n        case SUM_PRICE:\r\n            let sum = 0;\r\n            state.items.forEach(item => {\r\n                sum += (item.counter * item.price);\r\n            })\r\n            return {\r\n                ...state,\r\n                sum\r\n            };\r\n        case DEC_PRICE:\r\n            return {\r\n                ...state,\r\n                sum: state.sum - action.payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default reducer;","import { createStore } from \"redux\";\r\nimport reducer from './reducers';\r\nconst store = createStore(reducer);\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport ErrorBoundry from './components/error-boundry';\nimport RestoService from './services/resto-service';\nimport RestoServiceContext from './components/resto-service-context';\nimport store from './store';\n\nimport './index.scss';\n\nconst restoService = new RestoService();\n\nReactDOM.render(\n    <Provider store={store}>\n        <ErrorBoundry>\n            <RestoServiceContext.Provider value={restoService}>\n                <Router>\n                    <App/>\n                </Router>\n            </RestoServiceContext.Provider>\n        </ErrorBoundry>\n    </Provider>\n    , document.getElementById('root'));\n\n\n"],"sourceRoot":""}